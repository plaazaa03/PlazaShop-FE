<!-- Contenedor principal -->
<div class="max-w-6xl mx-auto p-6 space-y-8">

  <!-- Carrito resumen -->
  <section class="bg-white shadow rounded-2xl p-6 border border-gray-200">
    <h2 class="text-2xl font-bold mb-4 text-gray-800">ðŸ›’ Resumen del Carrito</h2>
    <ul class="divide-y divide-gray-200 mb-4">
      <li *ngFor="let item of carrito" class="py-2 flex justify-between">
        <span class="text-gray-700">{{ item.producto.nombre }} x {{ item.cantidad }}</span>
        <span class="font-medium text-gray-900">{{ item.producto.precio | currency:'EUR' }}</span>
        <img src="{{ item.producto.imgagen }}" alt="Foto del producto">
      </li>
    </ul>
    <p class="text-right text-xl font-semibold text-blue-700">Total: {{ total | currency:'EUR' }}</p>
  </section>

  <!-- Formulario de pedido -->
  <section class="bg-white shadow rounded-2xl p-6 border border-gray-200">
    <h2 class="text-xl font-semibold mb-4 text-gray-800">ðŸ“¦ InformaciÃ³n de EnvÃ­o</h2>
    <div class="grid gap-4 md:grid-cols-2">
      <div>
        <label class="block mb-1 text-gray-600">MÃ©todo de Pago</label>
        <select [(ngModel)]="metodoPago" class="w-full border border-gray-300 rounded-lg p-2">
          <option value="tarjeta">Tarjeta de crÃ©dito</option>
          <option value="paypal">PayPal</option>
          <option value="transferencia">Transferencia bancaria</option>
        </select>
      </div>
      <div>
        <label class="block mb-1 text-gray-600">DirecciÃ³n de EnvÃ­o</label>
        <input [(ngModel)]="direccionEnvio" class="w-full border border-gray-300 rounded-lg p-2" placeholder="Calle Falsa 123...">
      </div>
    </div>
    <div *ngIf="metodoPago === 'tarjeta'">
      <label class="block mb-1 text-gray-600">NÃºmero de tarjeta</label>
      <input type="text" class="w-full border border-gray-300 rounded-lg p-2">
    </div>
    <div *ngIf="metodoPago === 'paypal'">
      <label class="block mb-1 text-gray-600">Correo electrÃ³nico de PayPal</label>
      <input type="email" class="w-full border border-gray-300 rounded-lg p-2">
    </div>
    <div *ngIf="metodoPago === 'transferencia'">
      <label class="block mb-1 text-gray-600">NÃºmero de cuenta bancaria</label>
      <input type="text" class="w-full border border-gray-300 rounded-lg p-2">
    </div>
    <button (click)="realizarPedido()" class="mt-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-lg">
      Finalizar Pedido
    </button>
  </section>

  <!-- Pedido reciÃ©n realizado -->
  <section *ngIf="pedidoReciente" class="bg-green-50 border border-green-300 shadow rounded-2xl p-6">
    <h2 class="text-xl font-bold text-green-800">âœ… Pedido Realizado con Ã‰xito</h2>
    <p class="mt-2">ID: <strong>{{ pedidoReciente.id }}</strong></p>
    <p>Total: {{ pedidoReciente.total | currency:'EUR' }}</p>
    <p>Estado: <span class="text-sm bg-yellow-100 text-yellow-800 px-2 py-1 rounded">{{ pedidoReciente.estado }}</span></p>
    <ul class="mt-4 space-y-2">
      <li *ngFor="let producto of pedidoReciente.productos" class="flex justify-between">
        <span>{{ producto.nombre }} (x{{ producto.pivot.cantidad }})</span>
        <img src="{{ producto.foto }}" alt="Foto del producto">
        <span>{{ producto.pivot.precio_unitario | currency:'EUR' }}</span>
      </li>
    </ul>
  </section>
    <!-- Detalles del pedido seleccionado -->
  <section *ngIf="pedidoSeleccionado" class="bg-white border border-gray-300 shadow rounded-2xl p-6">
    <h2 class="text-xl font-bold text-gray-800 mb-2">ðŸ“„ Detalles del Pedido #{{ pedidoSeleccionado.id }}</h2>
    <p>Total: {{ pedidoSeleccionado.total | currency:'EUR' }}</p>
    <p>Estado: <span class="text-sm bg-yellow-100 text-yellow-800 px-2 py-1 rounded">{{ pedidoSeleccionado.estado }}</span></p>
    <ul class="mt-4 space-y-2">
      <li *ngFor="let producto of pedidoSeleccionado.productos" class="flex justify-between text-sm">
        <span>{{ producto.nombre }} (x{{ producto.pivot.cantidad }})</span>
        <img src="{{ producto.foto }}" alt="Foto del producto">
        <span>{{ producto.pivot.precio_unitario | currency:'EUR' }}</span>
      </li>
    </ul>
  </section>

  <!-- Lista de pedidos -->
  <section class="bg-white border border-gray-300 shadow rounded-2xl p-6">
    <h2 class="text-2xl font-bold mb-4 text-gray-800">ðŸ“š Historial de Pedidos</h2>
    <div class="divide-y divide-gray-200">
      <div *ngFor="let pedido of pedidos" (click)="verDetalles(pedido)"
           class="py-3 cursor-pointer hover:bg-gray-50 px-2 rounded transition">
        <div class="flex justify-between items-center">
          <div>
            <p class="font-semibold">Pedido #{{ pedido.id }}</p>
            <p class="text-sm text-gray-500">{{ pedido.created_at | date:'medium' }}</p>
          </div>
          <div class="text-right">
            <p class="text-blue-600 font-medium">{{ pedido.total | currency:'EUR' }}</p>
            <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">{{ pedido.estado }}</span>
          </div>
        </div>
      </div>
    </div>
  </section>

</div>